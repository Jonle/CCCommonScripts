var Promise=(function(window){function Promise(processor){var self=this;self.status='pending';self.value=null;self.reason=null;self.onRejectedCallbacks=[];self.onFulfilledCallbacks=[];function resolve(value){if(self.status==='pending'){self.status='fulfilled';self.value=value;self.onFulfilledCallbacks.map(function(callback){callback();});}}
function reject(reason){if(self.status==='pending'){self.status='rejected';self.reason=reason;self.onRejectedCallbacks.map(function(callback){callback(reason);});}}
try{processor(resolve,reject);}catch(e){setTimeout(function(){reject(e);});}}
var analysisPromise=function(x,resolve,reject){var then,y;if(x!==undefined&&(typeof x==='object'||typeof x==='function')){then=x.then;if(then&&typeof then==='function'){then.call(x,function(value){analysisPromise(value,resolve,reject);},function(error){reject(error);});}else{resolve(x);}}else{resolve(x);}};Promise.prototype.then=function(successCallback,errorCallback){var promise,x;var self=this;if(self.status==='fulfilled'){promise=new Promise(function(resolve,reject){setTimeout(function(){try{x=successCallback(self.value);analysisPromise(x,resolve,reject);}catch(e){reject(e);}});});}else if(self.status==='rejected'){promise=new Promise(function(resolve,reject){setTimeout(function(){try{x=errorCallback(self.reason);analysisPromise(x,resolve,reject);}catch(e){reject(e);}});});}else if(self.status==='pending'){promise=new Promise(function(resolve,reject){setTimeout(function(){self.onFulfilledCallbacks.push(function(){try{x=successCallback(self.value);analysisPromise(x,resolve,reject);}catch(e){reject(e);}});self.onRejectedCallbacks.push(function(){try{x=errorCallback?errorCallback(self.reason):undefined;analysisPromise(x,resolve,reject);}catch(e){reject(e);}});})});}
return promise;};Promise.prototype.catch=function(handleError){if(this.status==='pending'){this.onRejectedCallbacks.push(handleError);}else{this.reason&&handleError(this.reason);}};Promise.all=function(pArray){var rArray=[];var promise=new Promise(function(resolve,reject){pArray.forEach(function(pr,i){if(pr instanceof Promise){pr.then(function(value1){analysisPromise(value1,function(value2){rArray[i]=value2;if(rArray.length===pArray.length){resolve(rArray);}},reject);},function(error){reject(error);});}else{rArray[i]=pr;if(rArray.length===pArray.length){resolve(rArray);}}});});return promise;};Promise.race=function(pArray){var rArray=[];var promise=new Promise(function(resolve,reject){pArray.forEach(function(pr,i){if(pr instanceof Promise){pr.then(function(value){analysisPromise(value,resolve,reject);},function(error){reject(error);});}else{rArray[i]=pr;}});});return promise;};Promise.resolve=function(value){return new Promise(function(resolve,reject){resolve(value);});};Promise.reject=function(reason){return new Promise(function(resolve,reject){reject(reason);});};return window.Promise||Promise;})(window);